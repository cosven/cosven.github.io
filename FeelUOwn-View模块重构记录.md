title: FeelUOwn View模块重构记录
date: 2015-08-16 10:40:43
tags: [FeelUOwn]
categories: [笔记]
---

重构的时候并没有参考什么标准或者书籍，只是根据自己的思路让程序模块化更加清楚，代码更具可阅读性。这个可能还是需要参考其他的项目。

重构的过程遇到一些相关性不大的问题:

1. python值的传递
2. python的 \*args \*\*kwargs

<!-- more -->


## 之前的View的设计思路

我把View理解为程序的UI，Controller理解为UI的逻辑操作与交互、数据处理。

** 之前(现在依然沿用) **

- 程序主窗口的UI和Controller是单独分离出来的。
- 小的子窗口的UI和Controller是结合在一起的，相当于把一个小的窗口看成一个整体模块，它自己提供相关的接口。由主窗口来调用。

** 这样做的好处(我的理解，之后要去找一些具体的理论来支持或者推翻) **

主窗口UI逻辑比较复杂，结合太紧也就会导致耦合度高。
但是子窗口逻辑相对简单，维护起来本来就容易。如果也分离的话，就让项目变得臃肿。另外，我就觉得把它看成一个模块让主窗口来调用，也挺符合某种逻辑的。


#### 给view模块的widgets取别名

** 之前存在的问题 **

View中一些widget的名字经常变化，所以一旦View中的widget名字变化，导致在controller中调用这个widget的函数以及相关的东西都需要变化，这非常不利于维护。

** 解决办法: 取别名 **

给widget取一个**抽象**的名字。所谓抽象，就是把握一个点，这个widget是用来干什么，根据它的作用给它取个变量名，而不是根据它在界面中的位置。
controller调用的时候使用这个别名即可。

** 这样做的局限性 **
将会有大量的别名产生，还是让程序不容易维护。


#### python值的传递


```python
# list, dict 等可改变的对象，貌似是类似C语言引用传递
>>> a = [1,2,3,4]
>>> a_ = a
>>> a_[1] = 9
>>> a, a_
([1, 9, 3, 4], [1, 9, 3, 4])

# 数字，字符串，元组传递貌似是个具体的值
>>> b = 1
>>> b_ = b
>>> b_ = 3
>>> b, b_
(1, 3)

>>> def change(a):
...     a = 6
...
>>> b = 4
>>> change(b)
>>> b
4

# 这个特别注意
>>> def change_list(a):
...     a[0] = 6
...
>>> b = [1,2,3,4]
>>> change_list(b)
>>> b
[6, 2, 3, 4]
```

#### \*args 和 \*\*kwargs

一个例子来理解

```
def func(message, title="default", timeout=1000):
    print("message", title, timeout)

func(message, timeout=200)  # #1
```

`#1` 为什么可以这么调用？

我能理解`args`的含义，但是之前不懂`kwargs`代表什么。kw == keyword。
关于上面这个问题，只要去搜搜`python keyword arguments`大概就能找到答案。
